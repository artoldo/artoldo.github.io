<!-- Version: 1.0.8 | Last Update: 2025-06-29 | Author: Sacrisoft | © All rights reserved -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">
  <title>Artoldo catalog</title>
  <link rel="stylesheet" href="https://artoldo.github.io/css/uikit.min.css">
  <link rel="stylesheet" href="https://artoldo.github.io/custom.css">
  <script src="https://artoldo.github.io/js/uikit.min.js"></script>
  <script src="https://artoldo.github.io/js/uikit-icons.min.js"></script>
  <style>
.section {
  padding: 2rem;
  box-sizing: border-box;
}
.editor-toolbar {
  position: fixed;
  top: 10px;
  right: 24px;
  z-index: 1000;
  display: none;
}
.sticky-nav {
  position: fixed;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 999;
}
.sticky-nav .uk-button {
  min-width: 0;
  flex-shrink: 1;
  flex-grow: 1;
  padding-left: 0.7em;
  padding-right: 0.7em;
}
.dropcap {
  font-size: 2rem;
  font-weight: bold;
  margin-top: 1rem;
}
.uk-notification-message {
  min-width: 320px;
  max-width: 90vw;
  font-size: small;
  background-color: #fff;
  border-radius: 10px;
  word-break: break-all;
  overflow-wrap: anywhere;
}
.uk-modal.uk-open .uk-button {
  border-radius: 9999px !important;
}
.uk-modal-dialog {
  border-radius: 16px !important;
}
input, select {
  border-radius: 8px !important;
}
.language-chooser {
  position: fixed;
  top: 16px;
  left: 24px;
  z-index: 10;
  background: rgba(255,255,255,0.96);
}
.language-chooser .uk-button {
  margin: 0;
}
#language-chooser .uk-dropdown {
    border-radius: 15px !important;
    min-width: 260px;
}
[contenteditable="true"] {
  outline: none;
  min-height: 80px;
  border: 1px solid #ccc;
  padding: 1em;
  background: #fafafa;
}
.entry-content {
  font-size: 1.18em;
  line-height: 1.7;
  font-family: system-ui, Arial, sans-serif;
}
.center-media {
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 16px 0 24px 0;
}
.editor-rich-toolbar {
  margin-bottom: 6px;
  display: flex;
  gap: 0.5em;
}
.editor-rich-toolbar button {
  min-width: 32px;
  min-height: 32px;
}
.edit-lang-add-select {
    display: block;
    width: 100%;
    max-width: 100%;
    height: 40px;
    padding: 0 12px;
    font-size: 1rem;
    line-height: 40px;
    color: #222;
    background: #fff;
    border: 1px solid #e5e5e5;
    border-radius: 4px;
    box-sizing: border-box;
    transition: border-color .2s, box-shadow .2s;
    appearance: none;
}
.edit-lang-add-select:focus {
    border-color: #1e87f0;
    outline: 0;
    background: #fff;
}
.edit-lang-tabs .lang-tab-plus {
  font-size: 22px;
  font-weight: normal;
  color: #888;
  cursor: pointer;
  padding: 0 0.5em;
  vertical-align: middle;
}
.edit-lang-tabs .lang-tab-plus:hover {
  color: #111;
}
.add-lang-select-container {
  display: flex;
  align-items: center;
  margin-top: 10px;
}
.uk-tab>*>a {
  font-size: 17px;
}
@media (max-width: 800px) {
  .language-chooser { left: 10px; }
}
@media (max-width: 480px) {
  .sticky-nav .uk-button { font-size: 14px; padding: 0 4px; }
}
  </style>
</head>
<body class="uk-padding-large uk-padding-remove-horizontal">

<div class="uk-container uk-text-center uk-padding-large">
  <h1>ARTOLDO <span class="uk-text-lighter">catalog</span></h1>
  <h2>The collected works of Sara Ferro and Chris Weil</h2>
</div>

<div id="language-chooser" class="language-chooser">
  <div class="uk-inline">
    <button class="uk-button uk-button-default uk-border-pill" type="button" id="lang-btn-current" aria-haspopup="true">
      <span uk-icon="icon: world"></span>
      <span id="lang-btn-label">EN</span>
      <span uk-icon="icon: triangle-down"></span>
    </button>
    <div uk-dropdown="mode: click; pos: bottom-left; offset: 4" class="uk-drop uk-dropdown">
      <ul class="uk-nav uk-dropdown-nav" id="main-lang-dropdown"><li><a href="#" onclick="setLanguage('EN');return false;">EN - English</a></li></ul>
    </div>
  </div>
</div>
<div class="editor-toolbar uk-button-group" style="display: block;">
  <button class="uk-button uk-button-secondary uk-border-pill" id="add-btn" type="button">Add</button>
  <button class="uk-button uk-button-primary uk-border-pill" id="save-btn" type="button">Save</button>
</div>
<div class="sticky-nav uk-button-group">
  <button class="uk-button uk-button-secondary" uk-tooltip="Previous" onclick="scrollToPrev()" style="border-top-left-radius: 10px; border-bottom-left-radius: 10px;">
    <span uk-icon="icon: chevron-up; ratio: 1.5"></span>
  </button>
  <button class="uk-button uk-button-secondary" uk-tooltip="Next" onclick="scrollToNext()">
    <span uk-icon="icon: chevron-down; ratio: 1.5"></span>
  </button>
  <button class="uk-button uk-button-secondary" uk-tooltip="Random" onclick="scrollToRandom()">
    <span uk-icon="icon: bolt; ratio: 1.5"></span>
  </button>
  <button class="uk-button uk-button-secondary" uk-tooltip="Copy Link" onclick="copyCurrentLink()">
    <span uk-icon="icon: link; ratio: 1.5"></span>
  </button>
  <button class="uk-button uk-button-secondary" uk-tooltip="Search" onclick="showSearchModal()">
    <span uk-icon="icon: search; ratio: 1.5"></span>
  </button>
  <button class="uk-button uk-button-secondary" uk-tooltip="Glossary" onclick="UIkit.offcanvas('#glossary').show()" style="border-top-right-radius: 10px; border-bottom-right-radius: 10px;">
    <span uk-icon="icon: menu; ratio: 1.5"></span>
  </button>
</div>
<div id="glossary" uk-offcanvas="overlay: true" class="uk-offcanvas" style="" tabindex="-1">
  <div class="uk-offcanvas-bar" role="dialog" aria-modal="true" style="">
    <h3>Glossary</h3>
    <div id="glossary-list"><div class="dropcap">1</div><div><a href="#eb1e43a3-4dae-43b7-ab3c-e3ee600dd442">1. How to Enter Edit Mode</a></div><div class="dropcap">2</div><div><a href="#40ca2705-055a-438a-9308-b6edfe7e452c">2. Adding Text, Media, and Formatting</a></div><div class="dropcap">3</div><div><a href="#37cfcbe5-5ec3-45aa-a44b-2d99c0ab31d8">3. Adding Multiple Languages</a></div><div class="dropcap">4</div><div><a href="#06aba008-80e3-42b7-b53f-1914170f3435">4. Navigating the Interface</a></div></div>
  </div>
</div>
<div id="container"><div class="section uk-section uk-flex uk-flex-middle uk-flex-center" id="eb1e43a3-4dae-43b7-ab3c-e3ee600dd442" data-index="0">
      <div class="uk-container">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <h2 class="uk-text-center" style="flex:1">1. How to Enter Edit Mode</h2>
          
            <button class="uk-button uk-button-default uk-border-pill uk-margin-left" onclick="editEntryByIndex(0)" uk-tooltip="Edit Entry" style="margin-left:12px;"  aria-describedby="uk-tooltip-144">
              <span uk-icon="icon: pencil" class="uk-icon"></span>
            </button>
          
        </div>
        
        <div class="uk-margin entry-content"><p>Press&nbsp;<b>Ctrl + E</b>&nbsp;to toggle edit mode and reveal the editing toolbar.</p></div>
      </div>
    </div><div class="section uk-section uk-flex uk-flex-middle uk-flex-center" id="40ca2705-055a-438a-9308-b6edfe7e452c" data-index="1">
      <div class="uk-container">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <h2 class="uk-text-center" style="flex:1">2. Adding Text, Media, and Formatting</h2>
          
            <button class="uk-button uk-button-default uk-border-pill uk-margin-left" onclick="editEntryByIndex(1)" uk-tooltip="Edit Entry" style="margin-left:12px;"  aria-describedby="uk-tooltip-146">
              <span uk-icon="icon: pencil" class="uk-icon"></span>
            </button>
          
        </div>
        
        <div class="uk-margin entry-content"><p>Click&nbsp;<b>Add</b>&nbsp;or&nbsp;<b>Edit</b>&nbsp;to enter content. Paste or type text, insert <b>images&nbsp;</b>/&nbsp;<b>videos&nbsp;</b>/&nbsp;<b>website links</b> as <b>Lightbox </b>via Media URL, and use the toolbar to format text (<b>bold</b>, <i>italics</i>, <u>underline</u>). Choose text-alignment: left, center or right.</p></div>
      </div>
    </div><div class="section uk-section uk-flex uk-flex-middle uk-flex-center" id="37cfcbe5-5ec3-45aa-a44b-2d99c0ab31d8" data-index="2">
      <div class="uk-container">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <h2 class="uk-text-center" style="flex:1">3. Adding Multiple Languages</h2>
          
            <button class="uk-button uk-button-default uk-border-pill uk-margin-left" onclick="editEntryByIndex(2)" uk-tooltip="Edit Entry" style="margin-left:12px;"  aria-describedby="uk-tooltip-148">
              <span uk-icon="icon: pencil" class="uk-icon"></span>
            </button>
          
        </div>
        
        <div class="uk-margin entry-content"><p>Click the&nbsp;<b>+</b>&nbsp;tab in the language bar to <b>add another language</b>, then enter your <b>translation</b> in the new editor tab.</p></div>
      </div>
    </div><div class="section uk-section uk-flex uk-flex-middle uk-flex-center" id="06aba008-80e3-42b7-b53f-1914170f3435" data-index="3">
      <div class="uk-container">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <h2 class="uk-text-center" style="flex:1">4. Navigating the Interface</h2>
          
            <button class="uk-button uk-button-default uk-border-pill uk-margin-left" onclick="editEntryByIndex(3)" uk-tooltip="Edit Entry" style="margin-left:12px;"  aria-describedby="uk-tooltip-150">
              <span uk-icon="icon: pencil" class="uk-icon"></span>
            </button>
          
        </div>
        
        <div class="uk-margin entry-content"><p>Use the arrow buttons for <b>next / previous entries</b>, the lightning for <b>random</b>, the link to copy a <b>direct URL</b>, the magnifier to <b>search</b> <b>entries</b>, and the menu for the <b>full glossary</b>.</p></div>
      </div>
    </div></div>
<div id="edit-modal" uk-modal="" class="uk-modal" style="" tabindex="-1">
  <div class="uk-modal-dialog uk-modal-body" role="dialog" aria-modal="true">
    <h2 class="uk-modal-title">Edit Entry</h2>
    <input class="uk-input uk-margin-small-bottom" id="edit-title" placeholder="Title">
    <input class="uk-input uk-margin-small-bottom" id="edit-media" placeholder="Media URL">
    <div id="edit-lang-add-container" class="uk-margin-small"></div>
    <ul id="edit-lang-tabs" uk-tab="" class="edit-lang-tabs uk-tab" role="tablist"><li class="uk-active" role="presentation">
      <a href="#" onclick="setEditLangTab(0); return false;" aria-selected="true" role="tab" id="uk-tab-18-tab-0" aria-controls="uk-tab-18-tabpanel-0">
        EN
        
      </a>
    </li><li role="presentation">
    <a href="#" onclick="showLangSelect=true;updateEditLangTabs();return false;" class="lang-tab-plus" title="Add language" aria-selected="false" tabindex="-1" role="tab">+</a>
  </li></ul>
    <ul id="edit-lang-switcher" class="uk-switcher uk-margin" role="presentation" style="touch-action: pan-y pinch-zoom;"><li class="uk-active" id="uk-tab-18-tabpanel-0" role="tabpanel" aria-labelledby="uk-tab-18-tab-0">
      
  <div class="editor-rich-toolbar">
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Bold ; pos: bottom"  onclick="formatEditor('EN','bold')" aria-label="Bold" aria-describedby="uk-tooltip-124">
    <span uk-icon="bold" class="uk-icon"></span>
  </button>
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Italic ; pos: bottom"  onclick="formatEditor('EN','italic')" aria-label="Italic" aria-describedby="uk-tooltip-126">
    <span uk-icon="italic" class="uk-icon"></span>
  </button>
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Underline ; pos: bottom"  onclick="formatEditor('EN','underline')" aria-label="Underline" aria-describedby="uk-tooltip-128">
    <span uk-icon="minus" class="uk-icon"></span>
  </button>
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Bullet ; pos: bottom"  onclick="formatEditor('EN','insertUnorderedList')" aria-label="Bullet" aria-describedby="uk-tooltip-130">
    <span uk-icon="more-vertical" class="uk-icon"></span>
  </button>
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Numbered List ; pos: bottom"  onclick="formatEditor('EN','insertOrderedList')" aria-label="Numbered" aria-describedby="uk-tooltip-132">
    <span uk-icon="list" class="uk-icon"></span>
  </button>
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Align Left ; pos: bottom"  onclick="formatEditor('EN','justifyLeft')" aria-label="Left" aria-describedby="uk-tooltip-134">
    <span uk-icon="chevron-double-left" class="uk-icon"></span>
  </button>
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Align Center ; pos: bottom"  onclick="formatEditor('EN','justifyCenter')" aria-label="Center" aria-describedby="uk-tooltip-136">
    <span uk-icon="table" class="uk-icon"></span>
  </button>
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Align Right ; pos: bottom"  onclick="formatEditor('EN','justifyRight')" aria-label="Right" aria-describedby="uk-tooltip-138">
    <span uk-icon="chevron-double-right" class="uk-icon"></span>
  </button>
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Add Link ; pos: bottom"  onclick="insertLink('EN')" aria-label="Link" aria-describedby="uk-tooltip-140">
    <span uk-icon="link" class="uk-icon"></span>
  </button>
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Remove Link ; pos: bottom"  onclick="removeLink('EN')" aria-label="Remove Link" aria-describedby="uk-tooltip-142">
    <span uk-icon="ban" class="uk-icon"></span>
  </button>
  </div>
      <div id="editor-area-EN" contenteditable="true" class="uk-margin" style="border:1px solid #ccc;min-height:80px;padding:1em;text-align:left;"><p>Use the arrow buttons for <b>next / previous entries</b>, the lightning for <b>random</b>, the link to copy a <b>direct URL</b>, the magnifier to <b>search</b> <b>entries</b>, and the menu for the <b>full glossary</b>.</p></div>
    </li></ul>
 <div class="uk-flex uk-flex-between uk-flex-middle uk-margin-large-top">
  <div>
    <button class="uk-button uk-button-danger uk-border-pill" id="delete-btn" type="button">Delete</button>
  </div>
  <div>
    <button class="uk-button uk-button-default uk-modal-close uk-border-pill" type="button">Cancel</button>
    <button class="uk-button uk-button-primary uk-border-pill" id="save-edit-btn" type="button">Save</button>
  </div>
  </div>
 </div>
</div>
<div id="search-modal" uk-modal="" class="uk-modal">
  <div class="uk-modal-dialog uk-modal-body" role="dialog" aria-modal="true">
    <h3>Search</h3>
    <input id="search-input" class="uk-input" type="text" placeholder="Type to search..." oninput="renderSearchResults()" autofocus="">
    <ul id="search-results" class="uk-list uk-list-divider uk-margin"></ul>
    <button class="uk-button uk-button-default uk-modal-close uk-border-pill uk-align-right">Close</button>
  </div>
</div>






<script>
const ALL_LANGS = [{"code":"AF","name":"Afrikaans"},{"code":"AM","name":"አማርኛ (Amharic)"},{"code":"AR","name":"العربية (Arabic)"},{"code":"AZ","name":"Azərbaycan (Azerbaijani)"},{"code":"BE","name":"Беларуская (Belarusian)"},{"code":"BG","name":"Български (Bulgarian)"},{"code":"BN","name":"বাংলা (Bengali)"},{"code":"BS","name":"Bosanski (Bosnian)"},{"code":"CA","name":"Català (Catalan)"},{"code":"CS","name":"Čeština (Czech)"},{"code":"CY","name":"Cymraeg (Welsh)"},{"code":"DA","name":"Dansk (Danish)"},{"code":"DE","name":"Deutsch (German)"},{"code":"EL","name":"Ελληνικά (Greek)"},{"code":"EN","name":"English"},{"code":"ES","name":"Español (Spanish)"},{"code":"ET","name":"Eesti (Estonian)"},{"code":"EU","name":"Euskara (Basque)"},{"code":"FA","name":"فارسی (Persian)"},{"code":"FI","name":"Suomi (Finnish)"},{"code":"FR","name":"Français (French)"},{"code":"GA","name":"Gaeilge (Irish)"},{"code":"GL","name":"Galego (Galician)"},{"code":"GU","name":"ગુજરાતી (Gujarati)"},{"code":"HE","name":"עברית (Hebrew)"},{"code":"HI","name":"हिन्दी (Hindi)"},{"code":"HR","name":"Hrvatski (Croatian)"},{"code":"HU","name":"Magyar (Hungarian)"},{"code":"HY","name":"Հայերեն (Armenian)"},{"code":"ID","name":"Bahasa Indonesia"},{"code":"IS","name":"Íslenska (Icelandic)"},{"code":"IT","name":"Italiano (Italian)"},{"code":"JA","name":"日本語 (Japanese)"},{"code":"KA","name":"ქართული (Georgian)"},{"code":"KK","name":"Қазақ тілі (Kazakh)"},{"code":"KM","name":"ភាសាខ្មែរ (Khmer)"},{"code":"KN","name":"ಕನ್ನಡ (Kannada)"},{"code":"KO","name":"한국어 (Korean)"},{"code":"KU","name":"Kurdî (Kurdish)"},{"code":"KY","name":"Кыргызча (Kyrgyz)"},{"code":"LA","name":"Latina (Latin)"},{"code":"LB","name":"Lëtzebuergesch (Luxembourgish)"},{"code":"LT","name":"Lietuvių (Lithuanian)"},{"code":"LV","name":"Latviešu (Latvian)"},{"code":"MK","name":"Македонски (Macedonian)"},{"code":"ML","name":"മലയാളം (Malayalam)"},{"code":"MN","name":"Монгол (Mongolian)"},{"code":"MR","name":"मराठी (Marathi)"},{"code":"MS","name":"Bahasa Melayu (Malay)"},{"code":"MT","name":"Malti (Maltese)"},{"code":"NE","name":"नेपाली (Nepali)"},{"code":"NL","name":"Nederlands (Dutch)"},{"code":"NO","name":"Norsk (Norwegian)"},{"code":"PA","name":"ਪੰਜਾਬੀ (Punjabi)"},{"code":"PL","name":"Polski (Polish)"},{"code":"PS","name":"پښتو (Pashto)"},{"code":"PT","name":"Português (Portuguese)"},{"code":"RO","name":"Română (Romanian)"},{"code":"RU","name":"Русский (Russian)"},{"code":"SI","name":"සිංහල (Sinhala)"},{"code":"SK","name":"Slovenčina (Slovak)"},{"code":"SL","name":"Slovenščina (Slovenian)"},{"code":"SQ","name":"Shqip (Albanian)"},{"code":"SR","name":"Српски (Serbian)"},{"code":"SV","name":"Svenska (Swedish)"},{"code":"SW","name":"Kiswahili (Swahili)"},{"code":"TA","name":"தமிழ் (Tamil)"},{"code":"TE","name":"తెలుగు (Telugu)"},{"code":"TH","name":"ไทย (Thai)"},{"code":"TR","name":"Türkçe (Turkish)"},{"code":"UK","name":"Українська (Ukrainian)"},{"code":"UR","name":"اردو (Urdu)"},{"code":"UZ","name":"Oʻzbek (Uzbek)"},{"code":"VI","name":"Tiếng Việt (Vietnamese)"},{"code":"ZH","name":"中文 (Chinese – Simplified)"},{"code":"ZH-TW","name":"中文 (Chinese – Traditional)"}];
function generateId() {
  return window.crypto && window.crypto.randomUUID
    ? window.crypto.randomUUID()
    : 'id-' + Date.now() + '-' + Math.random().toString(36).slice(2, 10);
}
let entries = [
  {
    "title": "1. How to Enter Edit Mode",
    "content": {
      "EN": "<p>Press&nbsp;<b>Ctrl + E</b>&nbsp;to toggle edit mode and reveal the editing toolbar.</p>"
    },
    "media": "",
    "id": "eb1e43a3-4dae-43b7-ab3c-e3ee600dd442",
    "langs": [
      "EN"
    ]
  },
  {
    "title": "2. Adding Text, Media, and Formatting",
    "content": {
      "EN": "<p>Click&nbsp;<b>Add</b>&nbsp;or&nbsp;<b>Edit</b>&nbsp;to enter content. Paste or type text, insert <b>images&nbsp;</b>/&nbsp;<b>videos&nbsp;</b>/&nbsp;<b>website links</b> as <b>Lightbox </b>via Media URL, and use the toolbar to format text (<b>bold</b>, <i>italics</i>, <u>underline</u>). Choose text-alignment: left, center or right.</p>"
    },
    "media": "",
    "id": "40ca2705-055a-438a-9308-b6edfe7e452c",
    "langs": [
      "EN"
    ]
  },
  {
    "title": "3. Adding Multiple Languages",
    "content": {
      "EN": "<p>Click the&nbsp;<b>+</b>&nbsp;tab in the language bar to <b>add another language</b>, then enter your <b>translation</b> in the new editor tab.</p>"
    },
    "media": "",
    "id": "37cfcbe5-5ec3-45aa-a44b-2d99c0ab31d8",
    "langs": [
      "EN"
    ]
  },
  {
    "title": "4. Navigating the Interface",
    "content": {
      "EN": "<p>Use the arrow buttons for <b>next / previous entries</b>, the lightning for <b>random</b>, the link to copy a <b>direct URL</b>, the magnifier to <b>search</b> <b>entries</b>, and the menu for the <b>full glossary</b>.</p>"
    },
    "media": "",
    "id": "06aba008-80e3-42b7-b53f-1914170f3435",
    "langs": [
      "EN"
    ]
  }
];
let editIndex = null;
let isEditMode = false;
let currentEditLanguages = ["EN"];
let currentEditContent = {"EN":"<p>Use the arrow buttons for <b>next / previous entries</b>, the lightning for <b>random</b>, the link to copy a <b>direct URL</b>, the magnifier to <b>search</b> <b>entries</b>, and the menu for the <b>full glossary</b>.</p>"};
let tabRef = null;
let lang = 'EN';
let showLangSelect = false;
function allUsedLangs() {
  const found = new Set();
  entries.forEach(e => (e.langs || Object.keys(e.content || {})).forEach(l => found.add(l)));
  return [...found];
}
function renderMainLangDropdown() {
  const ul = document.getElementById('main-lang-dropdown');
  ul.innerHTML = "";
  let presentLangs = allUsedLangs().sort((a, b) => {
    let la = (ALL_LANGS.find(l => l.code === a) || {name: a}).name;
    let lb = (ALL_LANGS.find(l => l.code === b) || {name: b}).name;
    return la.localeCompare(lb);
  });
  if (!presentLangs.includes(lang)) {
    lang = presentLangs[0] || "";
  }
  presentLangs.forEach(code => {
    let info = ALL_LANGS.find(l => l.code === code) || {code, name: code};
    ul.innerHTML += `<li><a href="#" onclick="setLanguage('${code}');return false;">${code} - ${info.name}</a></li>`;
  });
  document.getElementById('lang-btn-label').textContent = lang || "";
}
function setLanguage(l) {
  lang = l;
  renderMainLangDropdown();
  renderEntries();
  const current = getCurrentSection();
  if(current) {
    const sec = document.getElementById(current.id);
    if(sec) sec.scrollIntoView({behavior: 'smooth', block: 'center'});
  }
}
function renderEntries() {
  entries.sort((a, b) => a.title.localeCompare(b.title));
  const container = document.getElementById('container');
  container.innerHTML = '';
  entries.forEach((entry, i) => {
    const section = document.createElement('div');
    section.className = 'section uk-section uk-flex uk-flex-middle uk-flex-center';
    section.id = entry.id;
    section.dataset.index = i;
    let mediaElement = '';
    if (entry.media) {
      let url = entry.media;
      let dataType = 'iframe';
      let label = 'Open Media';
      let icon = 'forward';
      if (url.includes('youtube.com/watch?v=')) {
        const id = url.split('v=')[1].split('&')[0];
        url = `https://www.youtube.com/embed/${id}`;
        label = 'Play Video'; icon = 'play';
      } else if (url.includes('youtu.be/')) {
        const id = url.split('youtu.be/')[1];
        url = `https://www.youtube.com/embed/${id}`;
        label = 'Play Video'; icon = 'play';
      } else if (url.match(/\.(jpe?g|png|gif|webp|svg)$/i)) {
        dataType = 'image'; label = 'Show Image'; icon = 'image';
      }
      mediaElement = `<div class="center-media" uk-lightbox>
        <a href="${url}" data-type="${dataType}">
          <button class="uk-button uk-button-default uk-border-pill" style="margin: 0 6px;">
            <span uk-icon="icon: ${icon}"></span> ${label}
          </button>
        </a>
      </div>`;
    }
    let displayContent = "";
    if (typeof entry.content === "object" && (entry.langs && entry.langs.length)) {
      displayContent = entry.content[lang] || entry.content[entry.langs[0]] || Object.values(entry.content).find(Boolean) || "";
    } else {
      displayContent = entry.content || "";
    }
    section.innerHTML = `
      <div class="uk-container">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <h2 class="uk-text-center" style="flex:1">${entry.title}</h2>
          ${isEditMode ? `
            <button class="uk-button uk-button-default uk-border-pill uk-margin-left"
              onclick="editEntryByIndex(${i})"
              uk-tooltip="Edit Entry"
              style="margin-left:12px;">
              <span uk-icon="icon: pencil"></span>
            </button>
          ` : ''}
        </div>
        ${mediaElement}
        <div class="uk-margin entry-content">${displayContent}</div>
      </div>
    `;
    container.appendChild(section);
  });
  renderGlossary();
  renderMainLangDropdown();
}
function renderGlossary() {
  const list = document.getElementById('glossary-list');
  list.innerHTML = '';
  const grouped = {};
  entries.forEach(entry => {
    const letter = entry.title.charAt(0).toUpperCase();
    if (!grouped[letter]) grouped[letter] = [];
    grouped[letter].push(entry);
  });
  Object.keys(grouped).sort().forEach(letter => {
    list.innerHTML += `<div class="dropcap">${letter}</div>`;
    grouped[letter].forEach(entry => {
      list.innerHTML += `<div><a href="#${entry.id}">${entry.title}</a></div>`;
    });
  });
}
function cleanHTML(input) {
  // Allow only b, strong, i, em, u, a, br, p (preserve paragraphs)
  let div = document.createElement('div');
  div.innerHTML = input;

  function cleanNode(node) {
    if (node.nodeType === 3) return node; // text
    if (node.nodeType === 1 && node.tagName === 'BR') return node.cloneNode(); // <br>
    if (node.nodeType === 1 && node.tagName === 'P') {
      let p = document.createElement('p');
      Array.from(node.childNodes).forEach(child => {
        let cleaned = cleanNode(child);
        if (cleaned) p.appendChild(cleaned);
      });
      return p;
    }
    if (node.nodeType !== 1) return null;
    let allowed = ['B','STRONG','I','EM','U','A','BR','P'];
    if (!allowed.includes(node.tagName)) {
      let fragment = document.createDocumentFragment();
      Array.from(node.childNodes).forEach(child => {
        let cleaned = cleanNode(child);
        if (cleaned) fragment.appendChild(cleaned);
      });
      return fragment;
    } else {
      let el = document.createElement(node.tagName);
      if (node.tagName === "A") {
        el.href = node.getAttribute('href') || '';
        el.setAttribute("target", "_blank");
        el.setAttribute("rel", "noopener noreferrer");
      }
      Array.from(node.childNodes).forEach(child => {
        let cleaned = cleanNode(child);
        if (cleaned) el.appendChild(cleaned);
      });
      return el;
    }
  }
  let cleaned = cleanNode(div);
  let container = document.createElement("div");
  container.appendChild(cleaned);
  return container.innerHTML;
}
function renderEditToolbar(l) {
  return `
  <div class="editor-rich-toolbar">
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Bold ; pos: bottom" title="Bold" onclick="formatEditor('${l}','bold')" aria-label="Bold">
    <span uk-icon="bold"></span>
  </button>
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Italic ; pos: bottom" title="Italic" onclick="formatEditor('${l}','italic')" aria-label="Italic">
    <span uk-icon="italic"></span>
  </button>
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Underline ; pos: bottom" title="Underline" onclick="formatEditor('${l}','underline')" aria-label="Underline">
    <span uk-icon="minus"></span>
  </button>
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Bullet ; pos: bottom" title="Bulleted List" onclick="formatEditor('${l}','insertUnorderedList')" aria-label="Bullet">
    <span uk-icon="more-vertical"></span>
  </button>
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Numbered List ; pos: bottom" title="Numbered List" onclick="formatEditor('${l}','insertOrderedList')" aria-label="Numbered">
    <span uk-icon="list"></span>
  </button>
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Align Left ; pos: bottom" title="Align Left" onclick="formatEditor('${l}','justifyLeft')" aria-label="Left">
    <span uk-icon="chevron-double-left"></span>
  </button>
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Align Center ; pos: bottom" title="Align Center" onclick="formatEditor('${l}','justifyCenter')" aria-label="Center">
    <span uk-icon="table"></span>
  </button>
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Align Right ; pos: bottom" title="Align Right" onclick="formatEditor('${l}','justifyRight')" aria-label="Right">
    <span uk-icon="chevron-double-right"></span>
  </button>
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Add Link ; pos: bottom" title="Add Link" onclick="insertLink('${l}')" aria-label="Link">
    <span uk-icon="link"></span>
  </button>
  <button class="uk-button-default uk-border-rounded" uk-tooltip="Remove Link ; pos: bottom" title="Remove Link" onclick="removeLink('${l}')" aria-label="Remove Link">
    <span uk-icon="ban"></span>
  </button>
  </div>`;
}
window.formatEditor = function(l, cmd) {
  let editor = document.getElementById('editor-area-' + l);
  editor.focus();
  document.execCommand(cmd, false, null);
  editor.focus();
};
window.insertLink = function(l) {
  let url = prompt("Enter URL:");
  if (!url) return;
  let editor = document.getElementById('editor-area-' + l);
  editor.focus();
  document.execCommand("createLink", false, url);
  // All links should be _blank
  setTimeout(() => {
    let links = editor.querySelectorAll("a[href]");
    links.forEach(a => {
      a.setAttribute("target","_blank");
      a.setAttribute("rel","noopener noreferrer");
      a.removeAttribute("style");
    });
  },1);
  editor.focus();
};
window.removeLink = function(l) {
  let editor = document.getElementById('editor-area-' + l);
  editor.focus();
  document.execCommand("unlink", false, null);
  editor.focus();
};
function renderAddLangSelect() {
  const unused = ALL_LANGS.filter(l => !currentEditLanguages.includes(l.code)).sort((a,b)=>a.name.localeCompare(b.name));
  if (!showLangSelect || unused.length == 0) return '';
  let html = `<div class="add-lang-select-container"><select class="edit-lang-add-select" id="lang-select"><option value="">Select language...</option>`;
  unused.forEach(l => {
    html += `<option value="${l.code}">${l.code} - ${l.name}</option>`;
  });
  html += "</select></div>";
  setTimeout(() => {
    let select = document.getElementById("lang-select");
    if (select) select.onchange = function() {
      if (select.value) addLang(select.value);
      showLangSelect = false;
      updateEditLangTabs(currentEditLanguages.length-1);
    };
  }, 30);
  return html;
}
function updateEditLangTabs(selectedIdx = 0) {
  const tabs = document.getElementById('edit-lang-tabs');
  const switcher = document.getElementById('edit-lang-switcher');
  tabs.innerHTML = '';
  switcher.innerHTML = '';
  let canRemove = currentEditLanguages.length > 1;
  if (currentEditLanguages.length === 0) {
    currentEditLanguages = ["EN"];
    currentEditContent = { EN: "" };
  }
  // Tabs
  currentEditLanguages.forEach((l, idx) => {
    tabs.innerHTML += `<li>
      <a href="#" onclick="setEditLangTab(${idx}); return false;">
        ${l}
        ${canRemove ? `<span style="color:#a00;cursor:pointer;font-size:15px;padding-left:5px;" onclick="removeLang(event,'${l}')" uk-tooltip="Remove language">×</span>` : ''}
      </a>
    </li>`;
  });
  // Plus tab
  tabs.innerHTML += `<li>
    <a href="#" onclick="showLangSelect=true;updateEditLangTabs();return false;" class="lang-tab-plus" uk-tooltip="Add language">+</a>
  </li>`;
  // Editors
  currentEditLanguages.forEach((l, idx) => {
    switcher.innerHTML += `<li>
      ${renderEditToolbar(l)}
      <div id="editor-area-${l}" contenteditable="true" class="uk-margin" style="border:1px solid #ccc;min-height:80px;padding:1em;text-align:left;"></div>
    </li>`;
  });
  // Language select
  document.getElementById("edit-lang-add-container").innerHTML = renderAddLangSelect();
  setTimeout(() => {
    tabRef = UIkit.tab(tabs);
    tabRef.show(selectedIdx);
    currentEditLanguages.forEach((l, i) => {
      let editor = document.getElementById('editor-area-' + l);
      editor.innerHTML = currentEditContent[l] || "";
      // PASTE listener
      editor.onpaste = function(e) {
        e.preventDefault();
        let html = (e.clipboardData || window.clipboardData).getData('text/html');
        let text = (e.clipboardData || window.clipboardData).getData('text');
        if (html) {
          let cleaned = cleanHTML(html);
          document.execCommand("insertHTML", false, cleaned);
        } else {
          // Convert line breaks in plain text to <br>
          if (text.indexOf('\n') > -1) {
            cleaned = text.split('\n').map(line => line.trim() ? `<p>${line}</p>` : '').join('');
            document.execCommand("insertHTML", false, cleaned);
          } else {
            document.execCommand("insertText", false, text);
          }
        }
      };
    });
  }, 1);
}
function setEditLangTab(idx) { tabRef.show(idx); }
function addLang(code) {
  if (!currentEditLanguages.includes(code)) {
    saveEditAreasContent();
    currentEditLanguages.push(code);
    currentEditContent[code] = "";
    updateEditLangTabs(currentEditLanguages.length - 1);
  }
  showLangSelect = false;
}
function removeLang(e, code) {
  e.stopPropagation();
  if (currentEditLanguages.length <= 1) return;
  saveEditAreasContent();
  let idx = currentEditLanguages.indexOf(code);
  currentEditLanguages = currentEditLanguages.filter(l => l !== code);
  delete currentEditContent[code];
  let nextIdx = Math.max(0, idx - 1);
  updateEditLangTabs(nextIdx);
}
function saveEditAreasContent() {
  currentEditLanguages.forEach(l => {
    const val = document.getElementById('editor-area-' + l).innerHTML.trim();
    currentEditContent[l] = val;
  });
}
function addEntry() {
  let langsAvailable = allUsedLangs();
  let firstLang = langsAvailable.length ? langsAvailable[0] : "EN";
  currentEditLanguages = [firstLang];
  currentEditContent = {};
  currentEditContent[firstLang] = "";
  showLangSelect = false;
  updateEditLangTabs();
  document.getElementById('edit-title').value = '';
  document.getElementById('edit-media').value = '';
  UIkit.modal('#edit-modal').show();
  setTimeout(() => { document.getElementById('edit-title').focus(); }, 120);
  editIndex = null; // Important for new entries
}

function editEntryByIndex(idx) {
  editIndex = idx;
  const entry = entries[editIndex];
  currentEditLanguages = entry.langs ? entry.langs.slice() : Object.keys(entry.content || {});
  if (currentEditLanguages.length === 0) currentEditLanguages = ["EN"];
  currentEditContent = {};
  currentEditLanguages.forEach(l => {
    currentEditContent[l] = (entry.content && entry.content[l]) || "";
  });
  showLangSelect = false;
  updateEditLangTabs();
  document.getElementById('edit-title').value = entry.title;
  document.getElementById('edit-media').value = entry.media || '';
  UIkit.modal('#edit-modal').show();
}
window.editEntryByIndex = editEntryByIndex;

function editEntry() {
  const section = getCurrentSection();
  if (!section) return;
  editIndex = Number(section.dataset.index);
  const entry = entries[editIndex];
  currentEditLanguages = entry.langs ? entry.langs.slice() : Object.keys(entry.content || {});
  if(currentEditLanguages.length === 0) currentEditLanguages = ["EN"];
  currentEditContent = {};
  currentEditLanguages.forEach(l => {
    currentEditContent[l] = (entry.content && entry.content[l]) || "";
  });
  showLangSelect = false;
  updateEditLangTabs();
  document.getElementById('edit-title').value = entry.title;
  document.getElementById('edit-media').value = entry.media || '';
  UIkit.modal('#edit-modal').show();
}
function saveEdit() {
  saveEditAreasContent();
  const title = document.getElementById('edit-title').value.trim();
  const media = document.getElementById('edit-media').value.trim();
  const content = {};
  currentEditLanguages.forEach(l => content[l] = currentEditContent[l] || "");
  if (!title) return;
  let newId = null;
  if (editIndex === null) {
    newId = generateId();
    const entry = { title, content, media, id: newId, langs: currentEditLanguages.slice() };
    entries.push(entry);
  } else {
    let oldEntry = entries[editIndex];
    let cleanedContent = {};
    currentEditLanguages.forEach(l => { cleanedContent[l] = content[l]; });
    entries[editIndex] = { ...oldEntry, title, content: cleanedContent, media, langs: currentEditLanguages.slice() };
    newId = oldEntry.id;
  }
  UIkit.modal('#edit-modal').hide();
  renderEntries();
  renderMainLangDropdown();
  setTimeout(() => {
    const el = document.getElementById(newId);
    if (el) el.scrollIntoView({behavior: 'smooth', block: 'start'});
  }, 200);
}
function confirmDelete() {
  const section = getCurrentSection();
  if (!section) return;
  const index = Number(section.dataset.index);
  UIkit.modal.confirm('Delete this entry?').then(() => {
    entries.splice(index, 1);
    renderEntries();
    renderMainLangDropdown();
    UIkit.modal('#edit-modal').hide();
  });
}
function getCurrentSection() {
  const sections = document.querySelectorAll('.section');
  let closest = null;
  let minDiff = Infinity;
  const scrollTop = window.scrollY;
  sections.forEach(section => {
    const diff = Math.abs(section.offsetTop - scrollTop);
    if (diff < minDiff) {
      minDiff = diff;
      closest = section;
    }
  });
  return closest;
}
function scrollToNext() {
  const current = getCurrentSection();
  if (current && current.nextElementSibling) {
    current.nextElementSibling.scrollIntoView({ behavior: 'smooth' });
  }
}
function scrollToPrev() {
  const current = getCurrentSection();
  if (current && current.previousElementSibling) {
    current.previousElementSibling.scrollIntoView({ behavior: 'smooth' });
  }
}
function scrollToRandom() {
  if (!entries.length) return;
  const rand = Math.floor(Math.random() * entries.length);
  const section = document.getElementById(entries[rand].id);
  if (section) section.scrollIntoView({ behavior: 'smooth' });
}
function copyCurrentLink() {
  const section = getCurrentSection();
  if (!section) return;
  const anchor = window.location.href.split('#')[0] + '#' + section.id;
  navigator.clipboard.writeText(anchor).then(() => {
    UIkit.notification(`Link copied: ${anchor}`, 'success');
  }).catch(() => {
    UIkit.notification("Failed to copy link", 'danger');
  });
}
function rebindAllButtons() {
  document.getElementById('add-btn').onclick = addEntry;
  document.getElementById('delete-btn').onclick = confirmDelete;
  document.getElementById('save-btn').onclick = downloadHTML;
  document.getElementById('save-edit-btn').onclick = saveEdit;
}
function showSearchModal() {
  UIkit.modal('#search-modal').show();
  setTimeout(() => {
    document.getElementById('search-input').focus();
    renderSearchResults();
  }, 120);
}
function renderSearchResults() {
  const query = document.getElementById('search-input').value.trim().toLowerCase();
  const ul = document.getElementById('search-results');
  ul.innerHTML = '';
  if (!query) return;
  let results = entries.filter(entry => {
    let titleMatch = entry.title.toLowerCase().includes(query);
    let contentMatch = Object.values(entry.content || {}).some(
      val => (val || '').toLowerCase().includes(query)
    );
    return titleMatch || contentMatch;
  });
  if (!results.length) {
    ul.innerHTML = '<li class="uk-text-muted">No results.</li>';
    return;
  }
  results.forEach(entry => {
    ul.innerHTML += `<li><a href="#${entry.id}" onclick="jumpToEntry('${entry.id}');UIkit.modal('#search-modal').hide();">${entry.title}</a></li>`;
  });
}
function jumpToEntry(id) {
  const section = document.getElementById(id);
  if (section) section.scrollIntoView({behavior: 'smooth', block: 'center'});
}
document.addEventListener('DOMContentLoaded', function() {
  renderEntries();
  setLanguage(lang);
  isEditMode = false;
  document.querySelector('.editor-toolbar').style.display = 'none';
  rebindAllButtons();
});
document.addEventListener('keydown', function(e) {
  if ((e.metaKey || e.ctrlKey) && e.key.toLowerCase() === 'e') {
    isEditMode = !isEditMode;
    document.querySelector('.editor-toolbar').style.display = isEditMode ? 'block' : 'none';
    renderEntries();
  }
});
function downloadHTML() {
  saveEditAreasContent && saveEditAreasContent();
  const docType = '<!DOCTYPE html>';
  const head = document.head.outerHTML;
  const bodyHtml = document.body.innerHTML.replace(/<script[\s\S]*?<\/script>/ig,'');
  const entriesJSON = JSON.stringify(entries, null, 2).replace(/<\/script>/g, '<\\/script>');
  const langVal = lang;
  const logicScript = `<script>
const ALL_LANGS = ${JSON.stringify(ALL_LANGS)};
function generateId() {
  return window.crypto && window.crypto.randomUUID
    ? window.crypto.randomUUID()
    : 'id-' + Date.now() + '-' + Math.random().toString(36).slice(2, 10);
}
let entries = ${entriesJSON};
let editIndex = null;
let isEditMode = false;
let currentEditLanguages = ${JSON.stringify(currentEditLanguages)};
let currentEditContent = ${JSON.stringify(currentEditContent)};
let tabRef = null;
let lang = '${langVal}';
let showLangSelect = false;
${allUsedLangs.toString()}
${renderMainLangDropdown.toString()}
${setLanguage.toString()}
${renderEntries.toString()}
${renderGlossary.toString()}
${cleanHTML.toString()}
${renderEditToolbar.toString()}
window.formatEditor = ${window.formatEditor.toString()};
window.insertLink = ${window.insertLink.toString()};
window.removeLink = ${window.removeLink.toString()};
${renderAddLangSelect.toString()}
${updateEditLangTabs.toString()}
${setEditLangTab.toString()}
${addLang.toString()}
${removeLang.toString()}
${saveEditAreasContent.toString()}
${addEntry.toString()}
${editEntry.toString()}
${saveEdit.toString()}
${editEntryByIndex.toString()}
window.editEntryByIndex = editEntryByIndex;
${confirmDelete.toString()}
${getCurrentSection.toString()}
${scrollToNext.toString()}
${scrollToPrev.toString()}
${scrollToRandom.toString()}
${copyCurrentLink.toString()}
${rebindAllButtons.toString()}
${showSearchModal.toString()}
${renderSearchResults.toString()}
${jumpToEntry.toString()}
document.addEventListener('DOMContentLoaded', function() {
  renderEntries();
  setLanguage(lang);
  isEditMode = false;
  document.querySelector('.editor-toolbar').style.display = 'none';
  rebindAllButtons();
});
document.addEventListener('keydown', function(e) {
  if ((e.metaKey || e.ctrlKey) && e.key.toLowerCase() === 'e') {
    isEditMode = !isEditMode;
    document.querySelector('.editor-toolbar').style.display = isEditMode ? 'block' : 'none';
    renderEntries();
  }
});
${downloadHTML.toString()}
<\/script>`;
  const externalDeps = `
<script src="https://cdn.jsdelivr.net/npm/uikit@3.16.22/dist/js/uikit.min.js"><\\/script>
<script src="https://cdn.jsdelivr.net/npm/uikit@3.16.22/dist/js/uikit-icons.min.js"><\\/script>
`;
  const fullHTML = `${docType}
<html lang="en">
${head}
<body>
${bodyHtml}
${logicScript}
${externalDeps}
</body>
</html>`;
  const blob = new Blob([fullHTML], { type: 'text/html' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'catalog.html';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}
</script>

</body>
</html>