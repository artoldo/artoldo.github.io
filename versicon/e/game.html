<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Earth 61250</title>
    <style>
        body {
            background-color: #000;
            color: #fff;
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        #terminal {
            width: 80%;
            max-width: 600px;
            height: 90vh;
            background-color: #000;
            padding: 20px;
            padding-bottom: 100px; /* extra space for mobile keyboard */
            border-radius: 10px;
            border: 2px solid #0F0;
            overflow-y: auto;
            box-sizing: border-box;
            scroll-behavior: smooth;
        }

        #terminal:focus {
            outline: none;
        }

        #output {
            white-space: pre-wrap;
            margin-bottom: 10px;
            color: white;
        }
        #input-line {
            display: inline;
        }
        .command-color1 { color: #0F0; }
        .command-color2 { color: #0F0; }
        .command-color3 { color: #0F0; }
        .folder { background-color: #0F0; color: #000; padding: 5px 10px; border-radius: 3px; margin-top: 8px; display: inline-block; }
        .file { background-color: #000; color: #0F0; padding: 5px 10px; border-radius: 3px; margin-top: 8px; display: inline-block; }
        .cursor {
            animation: blink 1s steps(2, start) infinite;
            color: #fff;
        }
        @keyframes blink {
            50% { opacity: 0; }
        }

        * {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

    </style>

<!-- Background Animation Start -->

<style>
html,body{margin:0;padding:0;background:#000000;overflow:hidden;}
#bgCanvas{position:fixed;inset:0;margin:0;padding:0;z-index:-10;pointer-events:none;}
#bgCanvas canvas{position:fixed;top:0;left:0;width:100%;height:100%;display:block;filter:blur(2px);pointer-events:none;}
body, #container{position:relative;z-index:0;}
</style>

<div id="bgCanvas"><canvas id="mainCanvas"></canvas></div>

<script>
(function() {
    if (window.innerWidth > 768) return; // desktop, do nothing

    const lightboxContainer = document.querySelector('.uk-lightbox, .uk-lightbox-item, .uk-lightbox-container');
    if (!lightboxContainer) return;

    // Add a one-time click listener on the Lightbox to open in a new tab
    const openInNewTab = () => {
        window.open(window.location.href, '_blank');
        const closeButton = lightboxContainer.querySelector('.uk-lightbox-close');
        if (closeButton) closeButton.click();
        lightboxContainer.removeEventListener('click', openInNewTab);
    };

    lightboxContainer.addEventListener('click', openInNewTab, { once: true, passive: true });

})();
</script>

<script>
(function(){
  const canvas = document.getElementById("mainCanvas");
  const ctx = canvas.getContext("2d");

  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  const letters = "アカサタナハマヤラワ0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ!@#$%&*?";
  const fontSize = 20;
  const columns = Math.floor(canvas.width / fontSize);
  const drops = [];

  for(let i=0;i<columns;i++){
    drops[i] = Math.floor(Math.random()*canvas.height/fontSize);
  }

  function draw(){
    ctx.fillStyle = "rgba(0,0,0,0.05)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    ctx.fillStyle = "#0F0";
    ctx.font = fontSize+"px monospace";

    for(let i=0;i<drops.length;i++){
      const text = letters.charAt(Math.floor(Math.random()*letters.length));
      ctx.fillText(text,i*fontSize,drops[i]*fontSize);

      drops[i] += 0.5 + Math.random()*1; // random speed per column
      if(drops[i]*fontSize > canvas.height && Math.random() > 0.975){
        drops[i] = 0;
      }
    }
  }

  setInterval(draw,33);

  window.addEventListener("resize",()=>{
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  });
})();
</script>

<!-- Background Animation End -->

</head>
<body>

<div id="terminal" tabindex="0">
    <input type="text" id="hidden-input" style="position:fixed;top:0;left:0;opacity:0;width:1px;height:1px;pointer-events:none;">
    <div id="output"></div>
    <div>
        <span id="input-line">> </span><span id="user-input"></span><span class="cursor">_</span>
    </div>
</div>

<script>
    const outputDiv = document.getElementById('output');
    const userInputSpan = document.getElementById('user-input');
    const inputLine = document.getElementById('input-line');

    let currentDirectory = "root";
    const fileSystem = {
        "root": { folders: ["signals", "decryption", "analysis", "archives", "transmissions"], files: [] },
        "root/signals": { folders: [], files: ["extraterrestrial.log", "decoded-message.txt", "anomaly-report.txt", "signal-patterns.log"] },
        "root/decryption": { folders: ["keys", "algorithms", "protocols"], files: ["cipher.zip", "decryption-manual.doc", "encoded-data.doc"] },
        "root/decryption/algorithms": { folders: [], files: ["quantum-key.doc", "frequency-map.txt", "encryption-sequence.doc"] },
        "root/analysis": { folders: ["spectral", "linguistics", "patterns"], files: ["analysis-map.doc", "frequency-settings.conf", "suspicious-signals.txt"] },
        "root/archives": { folders: ["daily", "monthly"], files: ["emergency-backup.zip"] }
    };

    const fileContents = {
        "extraterrestrial.log": "Signal intercepted. Source coordinates: 42.7N, 73.5W. Signal type: Unknown modulation.",
        "decoded-message.txt": "Partial translation: 'We come in peace. Await further contact.'",
        "anomaly-report.txt": "Unusual energy spikes detected during signal reception. Possible interference.",
        "signal-patterns.log": "Pattern sequences correlate with prime number intervals.",
        "decryption-manual.doc": "Instructions for advanced alien cipher decryption techniques.",
        "encoded-data.doc": "Encrypted data block. Requires quantum key for access.",
        "cipher.zip": {
        type: "executable",
        action: shutdownSequence,
        snippet: "Executable file detected. Running 'cipher.zip'...",
        fullContent: "Decryption process initiated. System lockdown triggered..."
    },
        "quantum-key.doc": "Quantum encryption key: ZX9Q-47LM-3TNV-8YWP",
        "frequency-map.txt": "Map of signal frequencies and their probable meanings.",
        "encryption-sequence.doc": "Sequence for encoding outgoing transmissions.",
        "analysis-map.doc": "Map showing signal strength and origin points.",
        "frequency-settings.conf": "Configuration file for signal frequency adjustments.",
        "suspicious-signals.txt": "List of signals flagged for irregular patterns.",
        "emergency-backup.zip": "Compressed archive of intercepted data.",
    };

function generateRandomFiles() {
    // Adding random files to the specified directories
    const directories = [
        'root/',
        'root/analysis/spectral',
        'root/analysis/linguistics',
        'root/analysis/patterns',
        'root/archives/daily',           
        'root/archives/monthly',         
        'root/decryption/keys',  
        'root/decryption/protocols',  
        'root/decryption/algorithms'
    ];

    // Ensure that the nested directories exist in the file system
    directories.forEach(directory => {
        // Create files in each directory
        const numFiles = Math.floor(Math.random() * 3) + 1; // Random number of files (1-3)
        for (let i = 0; i < numFiles; i++) {
            const fileName = `signal-${Math.floor(Math.random() * 100)}.doc`;
            if (!fileSystem[directory]) {
                fileSystem[directory] = { folders: [], files: [] };
            }
            fileSystem[directory].files.push(fileName);
            fileContents[fileName] = `Encrypted token: ${Math.random().toString(36).substring(2, 15)}`;
        }
    });
}

function showDirectoryContents() {
    const folders = fileSystem[currentDirectory].folders.map(folder => `<span class="folder">${folder}</span>`).join("  ");
    const files = fileSystem[currentDirectory].files.map(file => `<span class="file">${file}</span>`).join("  ");
    
    output(`\nFolders:\n${folders || "None"}\n\nFiles:\n${files || "None"}`);
}

function output(text) {
    outputDiv.innerHTML += `\n> ${text}\n`;
    const terminal = document.getElementById("terminal");
    terminal.scrollTop = terminal.scrollHeight;
}

function processCommand(command) {
    const target = command.trim();
    if (target === "back") {
        if (currentDirectory !== "root") {
            currentDirectory = currentDirectory.split("/").slice(0, -1).join("/") || "root";
            output(`> You are now in ${currentDirectory}`);
            showDirectoryContents();
        } else {
            output("<span class='command-color1'>Already at root.</span>");
        }
    } else if (fileSystem[currentDirectory]?.folders.includes(target)) {
        currentDirectory = `${currentDirectory}/${target}`;
        output(`> You entered ${currentDirectory}`);
        showDirectoryContents();
    } else if (fileSystem[currentDirectory]?.files.includes(target)) {
        output(`> Opening file ${target}...`);
        openFile(target);
    } else {
        output("<span class='command-color1'>Folder or file not found.</span>");
    }
}

// OUTPUT - END OF LEVEL

function shutdownSequence() {
    output(">>> Initiating signal decryption sequence...");
    setTimeout(() => {
        const terminal = document.getElementById("terminal");

        terminal.innerHTML = 
            "<div style='color: #0F0; font-size: 2em; text-align: center;'>EARTH 61250</div>" +
            "<p style='color: #0F0; font-size: 1em; text-align: left; margin-top: 10px;'>" +
            "Nestled in the rolling hills of Usingen - Hessen (Germany), the telecommunication base stood quietly beneath the stars. Rows of satellite dishes, some towering nearly twenty meters high, were perfectly aligned, catching whispers from the sky that no ordinary receiver could detect. The facility was vast, sprawling across open fields and wooded ridges, a silent guardian of terrestrial and orbital communication.<br><br>" +

            "Tonight, the antennas hummed with unusual activity. A faint signal pulsed through the arrays—a frequency unlike anything previously recorded. It seemed deliberate, structured, almost intelligent. Every dish pivoted subtly, following its elusive path as the facility’s secure networks began cataloging the incoming data.<br><br>" +

            "Inside the base, the operations room glowed dimly with green light, screens filled with scrolling codes and signal patterns. Technicians monitored streams of encrypted fragments, some appearing to follow mathematical sequences, others hidden behind layers of unknown cipher. The anomaly was unlike routine satellite chatter; it was something else—something not of this world.<br><br>" +

            "For hours, the signal was intercepted, fragmented, and stored across the facility’s secure systems. Each dish, each server, each backup was synchronized to ensure no piece of data could be lost. Outside, the wind rustled through the fields, oblivious to the cosmic exchange unfolding just above.<br><br>" +

            "When the last fragment had been cataloged and secured, the facility’s systems sealed themselves. Antennas locked in place, data stored in redundant arrays, the signal contained and classified. The base went silent, a giant sentinel resting again, guarding secrets that humanity was only beginning to understand.<br><br>" +

            "Above Hessen, the stars continued their silent orbit. Somewhere beyond them, the signal waited, its intent unknown, its message preserved. The facility would remain vigilant, listening, waiting for the next pulse from the universe, ensuring that Earth was ready—but careful, cautious, and secure.<br><br>" +

            "In the control room, the screens blinked one final message:<br><br>" +
            "AS ABOVE. SO BELOW." +
            "</p>";

        // Jump to the top
        terminal.scrollTop = 0;

        // Disable further input
        document.removeEventListener('keydown', handleKeyDown);
    }, 4000);
}

function openFile(filename) {
    const fileData = fileContents[filename];
    if (fileData) {
        if (fileData.type === "executable" && typeof fileData.action === "function") {
            output(fileData.snippet); // Show a snippet that shutdown is starting
            fileData.action(); // Execute the shutdown sequence
        } else {
            if (fileContents[filename]) {
            output(fileContents[filename]);
            } 
        }
    } else {
        output("<span class='command-color1'>File not found.</span>");
    }
}

    function scrollTerminal() {
        const terminal = document.getElementById("terminal");
        requestAnimationFrame(() => {
            terminal.scrollTop = terminal.scrollHeight;
        });
    }

    function output(text) {
        outputDiv.innerHTML += `\n> ${text}\n`;
        scrollTerminal();
    }

    function processCommand(command) {
        const target = command.trim();
        if (target === "back") {
            if (currentDirectory !== "root") {
                currentDirectory = currentDirectory.split("/").slice(0, -1).join("/") || "root";
                output(`> You are now in ${currentDirectory}`);
                showDirectoryContents();
            } else {
                output("<span class='command-color1'>Already at root.</span>");
            }
        } else if (fileSystem[currentDirectory]?.folders.includes(target)) {
            currentDirectory = `${currentDirectory}/${target}`;
            output(`> You entered ${currentDirectory}`);
            showDirectoryContents();
        } else if (fileSystem[currentDirectory]?.files.includes(target)) {
            output(`> Opening file ${target}...`);
            openFile(target);
        } else {
            output("<span class='command-color1'>Folder or file not found.</span>");
        }
    }

    const hiddenInput = document.getElementById('hidden-input');
    // userInputSpan already defined above

    document.getElementById('terminal').addEventListener('click', () => {
        hiddenInput.focus(); // opens mobile keyboard
    });

    hiddenInput.addEventListener('input', () => {
        userInputSpan.innerText = hiddenInput.value;
        scrollTerminal();
    });

    hiddenInput.addEventListener('keydown', (event) => {
        if (event.key === 'Enter') {
            const command = hiddenInput.value;
            output(`<span class='command-color1'>${command}</span>`);
            processCommand(command);
            hiddenInput.value = '';
            userInputSpan.innerText = '';
        } else if (event.key === 'Backspace') {
            // handled automatically by input
        }
    });

    function typingAnimation(text, callback) {
        let index = 0;
        const interval = setInterval(() => {
            if (index < text.length) {
                outputDiv.innerHTML += `<span class='command-color1'>${text[index]}</span>`;
                index++;
            } else {
                clearInterval(interval);
                outputDiv.innerHTML += "<br><br>";
                callback();
            }
        }, 100);
    }

    typingAnimation("Intercepting classified extraterrestrial signal... Decoding alien transmissions... Analyzing encrypted data... Access the files to uncover the message...", () => {
        output("Type the name of a <span class='command-color2'>folder</span> or a <span class='command-color3'>file</span> to open it.");
        output("Type <span class='command-color1'>back</span> to return to the previous directory.");
        generateRandomFiles();
        showDirectoryContents();
    });

    document.addEventListener('contextmenu', (event) => {
        event.preventDefault();
    });

    window.onload = function() {
        document.getElementById("terminal").focus();
    };
</script>

</body>
</html>