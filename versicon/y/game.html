<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YouTube Recycling Machine</title>

  <style>
    body{
      background:#000;
      color:#fff;
      font-family:'Courier New', Courier, monospace;
      display:flex;
      justify-content:center;
      align-items:center;
      height:100vh;
      margin:0;
      overflow:hidden;
    }

    #terminal{
      width:80%;
      max-width:600px;
      height:90vh;
      background:rgba(20,20,20,0.65);
      padding:20px;
      padding-bottom:100px;
      border-radius:10px;
      border:2px solid #FF0000;
      overflow-y:auto;
      box-sizing:border-box;
      scroll-behavior:smooth;
      box-shadow:0 0 20px rgba(255,0,0,0.5);
    }
    #terminal:focus{ outline:none; }

    #output{
      white-space:pre-wrap;
      margin-bottom:10px;
      color:#FFF;
      text-shadow:0 0 2px #FF0000;
    }

    #input-line{ display:inline; }

    .command-color1{ color:#FF0000; }
    .command-color2{ color:#FFAA00; }
    .command-color3{ color:#00FFFF; }

    .folder{
      background:#FF0000;
      color:#000;
      padding:5px 10px;
      border-radius:3px;
      margin-top:8px;
      display:inline-block;
      box-shadow:0 0 5px #FF0000;
    }
    .file{
      background:#111;
      color:#FFAA00;
      padding:5px 10px;
      border-radius:3px;
      margin-top:8px;
      display:inline-block;
      box-shadow:0 0 5px #FFAA00;
    }

    .cursor{
      animation:blink 1s steps(2,start) infinite;
      color:#FF0000;
    }
    @keyframes blink{ 50%{opacity:0;} }

    *{
      -webkit-user-select:none;
      -moz-user-select:none;
      -ms-user-select:none;
      user-select:none;
    }

    .inactive{ pointer-events:none; }
  </style>

  <!-- Background YouTube Remix Machine Animation Start -->
  <style>
    #bgPlayer{
      position:fixed;top:0;left:0;width:100%;height:100%;
      z-index:-10;overflow:hidden;background:#000;
    }

    .fakePlayer{
      position:absolute;
      width:120px;height:70px;
      background:#111;
      border:3px solid #FF0000;
      box-shadow:0 0 8px #FF0000;
      overflow:hidden;border-radius:4px;
      display:flex;flex-direction:column;
    }

    .fakeContent{
      flex-grow:1;
      background:linear-gradient(90deg,#222 25%,#333 50%,#222 75%);
      background-size:200% 100%;
      animation:moveContent 2s linear infinite;
    }
    @keyframes moveContent{
      0%{background-position:200% 0;}
      100%{background-position:-200% 0;}
    }

    .controlBar{
      height:14px;
      background:rgba(0,0,0,0.7);
      display:flex;align-items:center;justify-content:space-between;
      padding:0 3px;box-sizing:border-box;
    }
    .controlButton{
      width:6px;height:6px;background:#FF0000;border-radius:50%;
      margin-right:2px;
    }
    .progressBar{
      flex-grow:1;height:3px;background:#444;border-radius:2px;
      overflow:hidden;margin-left:2px;
    }
    .progressFill{
      width:30%;height:100%;
      background:#FF0000;
      animation:fillProgress 3s linear infinite;
    }
    @keyframes fillProgress{
      0%{width:0%;}
      50%{width:80%;}
      100%{width:0%;}
    }
  </style>

  <div id="bgPlayer"></div>

  <script>
  (function(){
    const NUM_PLAYERS = 50;
    const bgPlayer = document.getElementById("bgPlayer");

    function rand(min,max){ return Math.random()*(max-min)+min; }

    const players = [];
    for(let i=0;i<NUM_PLAYERS;i++){
      const player = document.createElement("div");
      player.className = "fakePlayer";
      player.style.left = rand(0, window.innerWidth - 120) + "px";
      player.style.top  = rand(0, window.innerHeight - 70) + "px";
      player.style.transform = `rotate(${rand(-15,15)}deg) scale(${rand(0.5,1)})`;
      player.style.opacity = rand(0.3,0.8);

      const content = document.createElement("div");
      content.className = "fakeContent";
      player.appendChild(content);

      const bar = document.createElement("div");
      bar.className = "controlBar";

      const buttons = document.createElement("div");
      buttons.style.display = "flex";
      for(let j=0;j<3;j++){
        const btn = document.createElement("div");
        btn.className = "controlButton";
        buttons.appendChild(btn);
      }
      bar.appendChild(buttons);

      const progress = document.createElement("div");
      progress.className = "progressBar";
      const fill = document.createElement("div");
      fill.className = "progressFill";
      progress.appendChild(fill);
      bar.appendChild(progress);

      player.appendChild(bar);
      bgPlayer.appendChild(player);

      players.push({
        el: player,
        x: parseFloat(player.style.left),
        y: parseFloat(player.style.top),
        dx: rand(-0.2,0.2),
        dy: rand(-0.2,0.2)
      });
    }

    function animatePlayers(){
      for(const p of players){
        p.x += p.dx;
        p.y += p.dy;

        if(p.x < 0 || p.x > window.innerWidth - 120) p.dx *= -1;
        if(p.y < 0 || p.y > window.innerHeight - 70)  p.dy *= -1;

        p.el.style.left = p.x + "px";
        p.el.style.top  = p.y + "px";
      }
      requestAnimationFrame(animatePlayers);
    }
    animatePlayers();

    window.addEventListener("resize", () => {
      for(const p of players){
        if(p.x > window.innerWidth - 120) p.x = window.innerWidth - 120;
        if(p.y > window.innerHeight - 70) p.y = window.innerHeight - 70;
      }
    });
  })();
  </script>
  <!-- Background YouTube Remix Machine Animation End -->
</head>

<body>
  <div id="terminal" tabindex="0">
    <input
      type="text"
      id="hidden-input"
      style="position:fixed;top:0;left:0;width:1px;height:1px;opacity:0;pointer-events:none;caret-color:transparent;font-size:16px;"
      autocomplete="off"
      autocorrect="off"
      autocapitalize="off"
      spellcheck="false"
    >
    <div id="output"></div>
    <div>
      <span id="input-line">> </span><span id="user-input"></span><span class="cursor">_</span>
    </div>
  </div>

  <script>
  // ===========================
  // Terminal logic (cleaned)
  // Fixes vs your snippet:
  // - removed invalid removeEventListener('keydown', handleKeyDown)
  // - prevent Enter key page jump
  // - avoid duplicate output()/scrollTerminal() definitions
  // - disable input after prototype reveal
  // ===========================
  const terminalEl    = document.getElementById('terminal');
  const outputDiv     = document.getElementById('output');
  const userInputSpan = document.getElementById('user-input');
  const hiddenInput   = document.getElementById('hidden-input');

  const ROOT_DIR = 'root';
  let currentDirectory = ROOT_DIR;
  let isEnding = false;

  const fileSystem = {
    "root": { folders: ["videos", "clips", "assets", "logs"], files: [] },
    "root/videos": { folders: ["funny", "music", "tutorials"], files: ["sample-video.txt", "README.txt"] },
    "root/clips": { folders: ["highlights", "memes"], files: ["clip-list.txt"] },
    "root/assets": { folders: ["thumbnails", "audio"], files: ["template.psd", "prototype.zip"] },
    "root/logs": { folders: [], files: ["recycle-log.txt"] }
  };

  const fileContents = {
    "sample-video.txt": "Metadata suggests this clip was flagged as a potential prototype seed. Look for patterns in file names.",
    "README.txt": "The secret prototype is hidden. Check the 'clips' and 'assets' folders for clues. Follow logs and notes carefully.",
    "clip-list.txt": "Hints: some clips contain keywords like 'echo', 'recycle', 'beta'. These may indicate prototype-related material.",
    "template.psd": "This asset file contains hidden layers. Some layers might hint at the prototype’s features if opened.",
    "recycle-log.txt": "Recycling operations sometimes mention 'hidden output'. Inspect timestamps and filenames for irregularities that lead to the prototype.",
    "prototype.zip": {
      type: "executable",
      snippet: "Encrypted prototype file detected. Running 'prototype.zip'...",
      action: shutdownSequence
    }
  };

  function scrollTerminal(){
    if (isEnding) return;
    requestAnimationFrame(() => { terminalEl.scrollTop = terminalEl.scrollHeight; });
  }

  function output(text){
    outputDiv.innerHTML += `\n> ${text}\n`;
    scrollTerminal();
  }

  function showDirectoryContents(){
    const dirData = fileSystem[currentDirectory] || { folders: [], files: [] };

    let foldersHTML = dirData.folders
      .map(folder => `<span class="folder" data-type="folder" data-name="${folder}">${folder}</span>`)
      .join("  ");

    let filesHTML = dirData.files
      .map(file => `<span class="file" data-type="file" data-name="${file}">${file}</span>`)
      .join("  ");

    if (currentDirectory !== ROOT_DIR){
      foldersHTML = `<span class="folder" data-type="back">&lt;&lt; back</span>` +
        (foldersHTML ? "  " + foldersHTML : "");
    }

    outputDiv.querySelectorAll('.dir-block').forEach(b => b.classList.add('inactive'));
    outputDiv.querySelectorAll('.file-block').forEach(b => b.classList.add('inactive'));

    const dirBlock = document.createElement('div');
    dirBlock.className = 'dir-block';
    dirBlock.innerHTML = `\nFolders:\n${foldersHTML || "None"}\n\nFiles:\n${filesHTML || "None"}`;
    outputDiv.appendChild(dirBlock);
    scrollTerminal();

    dirBlock.querySelectorAll('.folder, .file').forEach(item => {
      item.style.cursor = "pointer";
      item.addEventListener('click', () => {
        if (isEnding) return;

        const type = item.getAttribute('data-type');
        const name = item.getAttribute('data-name');

        if (type === "folder"){
          currentDirectory = `${currentDirectory}/${name}`;
          output(`> You entered ${currentDirectory}`);
          showDirectoryContents();
        } else if (type === "file"){
          output(`> Opening file ${name}...`);
          openFile(name);
        } else if (type === "back"){
          currentDirectory = currentDirectory.split("/").slice(0,-1).join("/") || ROOT_DIR;
          output(`> You are now in ${currentDirectory}`);
          showDirectoryContents();
        }
      });
    });
  }

  function openFile(filename){
    const fileData = fileContents[filename];
    if (!fileData){
      output("<span class='command-color1'>File not found.</span>");
      return;
    }

    if (fileData.type === "executable" && typeof fileData.action === "function"){
      output(fileData.snippet);
      fileData.action();
      return;
    }

    output(fileContents[filename]);

    outputDiv.querySelectorAll('.file-block').forEach(b => b.classList.add('inactive'));
    outputDiv.querySelectorAll('.dir-block').forEach(b => b.classList.add('inactive'));

    const fileBlock = document.createElement('div');
    fileBlock.className = 'file-block';
    fileBlock.innerHTML = `\n<span class="folder" data-type="back-file">&lt;&lt; back</span>`;
    outputDiv.appendChild(fileBlock);
    scrollTerminal();

    const backButton = fileBlock.querySelector('.folder[data-type="back-file"]');
    backButton.style.cursor = 'pointer';
    backButton.addEventListener('click', () => {
      if (isEnding) return;
      showDirectoryContents();
    });
  }

  function processCommand(command){
    const target = command.trim();
    if (!target) return;

    if (target === "back"){
      if (currentDirectory !== ROOT_DIR){
        currentDirectory = currentDirectory.split("/").slice(0,-1).join("/") || ROOT_DIR;
        output(`> You are now in ${currentDirectory}`);
        showDirectoryContents();
      } else {
        output("<span class='command-color1'>Already at root.</span>");
      }
      return;
    }

    if (fileSystem[currentDirectory]?.folders.includes(target)){
      currentDirectory = `${currentDirectory}/${target}`;
      output(`> You entered ${currentDirectory}`);
      showDirectoryContents();
      return;
    }

    if (fileSystem[currentDirectory]?.files.includes(target)){
      output(`> Opening file ${target}...`);
      openFile(target);
      return;
    }

    output("<span class='command-color1'>Folder or file not found.</span>");
  }

  // ===== Ending / prototype reveal =====
  function shutdownSequence(){
    output(">>> Initiating prototype decryption sequence...");

    setTimeout(() => {
      isEnding = true;
      hiddenInput.disabled = true;
      hiddenInput.blur();

      terminalEl.innerHTML =
        "<div style='color:#FF0000;font-size:2em;text-align:center;'><br><br>YouTube Recycling Machine</div>" +
        "<p style='color:#FFAA00;font-size:1em;text-align:left;margin-top:10px;line-height:1.5;'>" +
        "The hidden prototype activates. Clips swirl, players remix in impossible combinations, and the machine composes videos no one has ever seen. " +
        "Files lock, logs encrypt, and only those who know the paths can follow the traces..." +
        "</p>" +
        "<p style='margin-top:20px;text-align:center;'>" +
        "<a href='./prototype.html' style='color:#fff;text-decoration:underline;'>Run Prototype</a>" +
        "</p>";

      terminalEl.style.scrollBehavior = "auto";
      requestAnimationFrame(()=>requestAnimationFrame(()=>{ terminalEl.scrollTop = 0; }));
    }, 2000);
  }

  // Focus input on click (mobile)
  terminalEl.addEventListener('click', () => {
    if (isEnding) return;
    hiddenInput.focus();
  });

  hiddenInput.addEventListener('input', () => {
    if (isEnding) return;
    userInputSpan.textContent = hiddenInput.value;
    scrollTerminal();
  });

  hiddenInput.addEventListener('keydown', (event) => {
    if (isEnding) return;
    if (event.key === 'Enter'){
      event.preventDefault(); // prevent page jump
      const command = hiddenInput.value;
      output(`<span class='command-color1'>${command}</span>`);
      processCommand(command);
      hiddenInput.value = '';
      userInputSpan.textContent = '';
    }
  });

  function typingAnimation(text, callback){
    let index = 0;
    const interval = setInterval(() => {
      if (index < text.length){
        outputDiv.innerHTML += `<span class='command-color1'>${text[index]}</span>`;
        index++;
        scrollTerminal();
      } else {
        clearInterval(interval);
        outputDiv.innerHTML += "<br><br>";
        callback();
      }
    }, 80);
  }

  typingAnimation(
    "Rumors speak of a hidden prototype — the YouTube Recycling Machine. Anonymous posts hint at its existence. Clips are scattered, logs partially erased, and assets encrypted. Only those who explore the folders carefully, read the hidden notes, and follow the subtle hints will uncover its location...",
    () => {
      output("Click or type the name of a <span class='command-color3'>folder</span> or a <span class='command-color2'>file</span> to investigate.");
      output("Click or type <span class='command-color1'>back</span> to return to the previous directory.");
      showDirectoryContents();
    }
  );

  document.addEventListener('contextmenu', (event) => event.preventDefault());

  window.addEventListener('load', () => {
    setTimeout(() => { if (!isEnding) hiddenInput.focus(); }, 120);
  });
  </script>
</body>
</html>